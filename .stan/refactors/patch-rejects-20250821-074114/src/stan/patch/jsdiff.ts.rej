diff a/src/stan/patch/jsdiff.ts b/src/stan/patch/jsdiff.ts	(rejected hunks)
@@ -37,7 +37,7 @@ export const applyWithJsDiff = async (args: {
     }
 
-    const rel = candidate.replace(/^[.\/]+/, '');
+    const rel = candidate.replace(/^[./]+/, '');
     const abs = path.resolve(cwd, rel);
 
     let original = '';
@@ -55,10 +55,18 @@ export const applyWithJsDiff = async (args: {
-    // Whitespace/EOL tolerance
-    const patched = applyPatch(original, p as ParsedDiff, {
-      compareLine: (a: string, b: string): boolean =>
-        normForCompare(a) === normForCompare(b),
-      fuzzFactor: 0,
-    });
+    // Whitespace/EOL tolerance for diff v8 API (compareLine signature changed)
+    const patched = applyPatch(original, p as StructuredPatch, {
+      compareLine: (
+        _lineNumber: number,
+        line: string,
+        _operation: string,
+        patchContent: string,
+      ): boolean => normForCompare(line) === normForCompare(patchContent),
+      fuzzFactor: 0,
+    });
