# Refactor: centralize out/.diff dir creation

When: 2025-08-19T22:31:20Z
Why: archive.ts and diff.ts both created <outputPath> and <outputPath>/.diff.
What changed:

- Added ensureOutAndDiff() to src/stan/fs.ts
- Updated archive.ts and diff.ts to consume it
  Tests/Lint:
- Tests: unchanged behavior
- Lint/Typecheck: clean
  Next:
- If future helpers need isUnder() or tar filters, consider a small tar-utils module
