# Refactor: robust CLI enumeration recovery

When: 2025-08-19T12:21:00Z
Why: CLI tests failed to capture positional `[scripts...]` when parsing with `parseAsync({ from: 'user' })`. We must robustly recover enumerated args per project requirements.
What changed:

- src/cli/stan/runner.ts: enhance `recoverEnumerated()` to also read `command.processedArgs`, flatten nested arrays, and filter to known script keys; keep dedupe and order.
- No changes to UX or options; behavior unchanged except fixing null selection in tests.
  Tests/Lint:
- tests: expected to pass (`runner.test.ts` and `runner.combine.test.ts` failures resolved).
- lint: unchanged (no new warnings).
  Links:
- Artifacts: ctx/stan/test.txt (original failures), this patch targets those cases.
  Next:
- None.
