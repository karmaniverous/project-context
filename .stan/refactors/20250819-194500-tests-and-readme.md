# Refactor: stabilize tests & refresh README

When: 2025-08-19T19:45:00Z
Why: Two failing tests (help footer capture and child_process mock); README needed to reflect always-on diffs, snapshot policy, and new CLI commands.
What changed:

- src/cli/stan/index.help.test.ts: capture help via outputHelp() with stdout spy; assert footer and subcommands.
- src/stan/patch.test.ts: Vitest-compliant partial mock of node:child_process with default export; spawn emits close(0).
- README.md: new narrative, always-on diffs, `stan snap`, `stan patch`, and plan summary.
  Tests/Lint:
- Tests: failing suites expected to pass after these changes.
- Lint: no remaining errors.
  Links:
- Artifacts: test.txt & lint.txt from prior run
  Next:
- Consider unique build log filenames on Windows to avoid handle contention (non-blocking).
