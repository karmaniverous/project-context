# Refactor: final CLI enum hardening

When: 2025-08-19T13:19:00Z
Why: Two CLI tests still failed to recover enumerated operands; earlier fallback sources missed some parse paths.
What changed:

- src/cli/stan/runner.ts:
  - Keep first-pass sources (action param, command.args).
  - If no known keys found, aggregate tokens from command & parent (rawArgs, processedArgs, args), then parse while skipping -e/--except values.
  - Dedupe + filter to known keys; preserve order.
    Tests/Lint:
- tests: expected remaining failures should pass (selection recovered for “run lint test -s” and “run -c lint”).
- lint: clean; typecheck: clean.
  Next:
- None.
